{"version":3,"sources":["CodeEditor.js"],"names":["define","$","Vvveb","CodeEditor","isActive","oldValue","doc","init","val","Builder","getHtml","keyup","delay","setHtml","this","value","frameBody","on","e","setValue","documentFrame","destroy","element","toggle"],"mappings":";;;;;;;AAAAA,QACC,0BACA,WACC,SAASC,EAAEC,GACZ,OAAOA,EAAMC,YAEZC,UAAU,EACVC,SAAU,GACVC,KAAI,EAEJC,KAAM,SAASD,GACdL,EAAE,+BAA+BO,IAAIN,EAAMO,QAAQC,WAEnDT,EAAE,+BAA+BU,MAAM,WAEtCT,EAAMU,MAAMV,EAAMO,QAAQI,QAAQC,KAAKC,OAAQ,OAIhDb,EAAMO,QAAQO,UAAUC,GAAG,oCAAqC,SAAUC,GAAKhB,EAAMC,WAAWgB,aAEhGjB,EAAMO,QAAQW,cAAcH,GAAG,OAAQ,SAAUC,GAAKhB,EAAMC,WAAWgB,aAEvEL,KAAKV,UAAW,GAGjBe,SAAU,SAASJ,GACdD,KAAKV,UAERH,EAAE,+BAA+BO,IAAIN,EAAMO,QAAQC,YAIrDW,QAAS,SAASC,KAIlBC,OAAQ,WACP,GAAqB,GAAjBT,KAAKV,SAGR,OADAU,KAAKV,UAAW,EACTU,KAAKP,OAEbO,KAAKV,UAAW,EAChBU,KAAKO","file":"../CodeEditor.js","sourcesContent":["define([\n\t\"skylark-utils-dom/query\",\n\t\"./Vvveb\"\n],function($,Vvveb){\n\treturn Vvveb.CodeEditor = {\n\t\t\n\t\tisActive: false,\n\t\toldValue: '',\n\t\tdoc:false,\n\t\t\n\t\tinit: function(doc) {\n\t\t\t$(\"#vvveb-code-editor textarea\").val(Vvveb.Builder.getHtml());\n\n\t\t\t$(\"#vvveb-code-editor textarea\").keyup(function () \n\t\t\t{\n\t\t\t\tVvveb.delay(Vvveb.Builder.setHtml(this.value), 1000);\n\t\t\t});\n\n\t\t\t//load code on document changes\n\t\t\tVvveb.Builder.frameBody.on(\"vvveb.undo.add vvveb.undo.restore\", function (e) { Vvveb.CodeEditor.setValue();});\n\t\t\t//load code when a new url is loaded\n\t\t\tVvveb.Builder.documentFrame.on(\"load\", function (e) { Vvveb.CodeEditor.setValue();});\n\n\t\t\tthis.isActive = true;\n\t\t},\n\n\t\tsetValue: function(value) {\n\t\t\tif (this.isActive)\n\t\t\t{\n\t\t\t\t$(\"#vvveb-code-editor textarea\").val(Vvveb.Builder.getHtml());\n\t\t\t}\n\t\t},\n\n\t\tdestroy: function(element) {\n\t\t\t//this.isActive = false;\n\t\t},\n\n\t\ttoggle: function() {\n\t\t\tif (this.isActive != true)\n\t\t\t{\n\t\t\t\tthis.isActive = true;\n\t\t\t\treturn this.init();\n\t\t\t}\n\t\t\tthis.isActive = false;\n\t\t\tthis.destroy();\n\t\t}\n\t}\n\n});\n\n\n"]}