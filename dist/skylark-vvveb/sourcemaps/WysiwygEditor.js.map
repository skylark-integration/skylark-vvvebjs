{"version":3,"sources":["WysiwygEditor.js"],"names":["define","$","Vvveb","WysiwygEditor","isActive","oldValue","doc","init","this","on","e","execCommand","preventDefault","undo","element","redo","edit","attr","contenteditable","spellcheckker","show","html","destroy","removeAttr","hide","node","get","Undo","addMutation","type","target","newValue","innerHTML"],"mappings":";;;;;;;AAAAA,QACC,0BACA,UACA,UACC,SAASC,EAAEC,GACZ,OAAOA,EAAMC,eAEZC,UAAU,EACVC,SAAU,GACVC,KAAI,EAEJC,KAAM,SAASD,GACdE,KAAKF,IAAMA,EAEXL,EAAE,aAAaQ,GAAG,QAAS,SAAUC,GAGnC,OAFAJ,EAAIK,YAAY,QAAO,EAAM,MAC7BD,EAAEE,kBACK,IAGTX,EAAE,eAAeQ,GAAG,QAAS,SAAUC,GAGrC,OAFAJ,EAAIK,YAAY,UAAS,EAAM,MAC/BD,EAAEE,kBACK,IAGTX,EAAE,kBAAkBQ,GAAG,QAAS,SAAUC,GAGxC,OAFAJ,EAAIK,YAAY,aAAY,EAAM,MAClCD,EAAEE,kBACK,IAGTX,EAAE,eAAeQ,GAAG,QAAS,SAAUC,GAGrC,OAFAJ,EAAIK,YAAY,iBAAgB,EAAM,MACtCD,EAAEE,kBACK,IAGTX,EAAE,aAAaQ,GAAG,QAAS,SAAUC,GAGnC,OAFAJ,EAAIK,YAAY,cAAa,EAAM,KACnCD,EAAEE,kBACK,KAIVC,KAAM,SAASC,GACdN,KAAKF,IAAIK,YAAY,QAAO,EAAM,OAGnCI,KAAM,SAASD,GACdN,KAAKF,IAAIK,YAAY,QAAO,EAAM,OAGnCK,KAAM,SAASF,GACdA,EAAQG,MAAMC,iBAAkB,EAAMC,eAAgB,IACtDlB,EAAE,mBAAmBmB,OAErBZ,KAAKM,QAAUA,EACfN,KAAKJ,UAAW,EAChBI,KAAKH,SAAWS,EAAQO,QAGzBC,QAAS,SAASR,GACjBA,EAAQS,WAAW,iCACnBtB,EAAE,mBAAmBuB,OACrBhB,KAAKJ,UAAW,EAGhBqB,KAAOjB,KAAKM,QAAQY,IAAI,GACxBxB,EAAMyB,KAAKC,aAAaC,KAAK,gBACvBC,OAAQL,KACRpB,SAAUG,KAAKH,SACf0B,SAAUN,KAAKO","file":"../WysiwygEditor.js","sourcesContent":["define([\r\n\t\"skylark-utils-dom/query\",\r\n\t\"./Vvveb\",\r\n\t\"./Undo\"\r\n],function($,Vvveb){\r\n\treturn Vvveb.WysiwygEditor = {\r\n\t\r\n\t\tisActive: false,\r\n\t\toldValue: '',\r\n\t\tdoc:false,\r\n\t\t\r\n\t\tinit: function(doc) {\r\n\t\t\tthis.doc = doc;\r\n\t\t\t\r\n\t\t\t$(\"#bold-btn\").on(\"click\", function (e) {\r\n\t\t\t\t\tdoc.execCommand('bold',false,null);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t$(\"#italic-btn\").on(\"click\", function (e) {\r\n\t\t\t\t\tdoc.execCommand('italic',false,null);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t$(\"#underline-btn\").on(\"click\", function (e) {\r\n\t\t\t\t\tdoc.execCommand('underline',false,null);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$(\"#strike-btn\").on(\"click\", function (e) {\r\n\t\t\t\t\tdoc.execCommand('strikeThrough',false,null);\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t$(\"#link-btn\").on(\"click\", function (e) {\r\n\t\t\t\t\tdoc.execCommand('createLink',false,\"#\");\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\tundo: function(element) {\r\n\t\t\tthis.doc.execCommand('undo',false,null);\r\n\t\t},\r\n\r\n\t\tredo: function(element) {\r\n\t\t\tthis.doc.execCommand('redo',false,null);\r\n\t\t},\r\n\t\t\r\n\t\tedit: function(element) {\r\n\t\t\telement.attr({'contenteditable':true, 'spellcheckker':false});\r\n\t\t\t$(\"#wysiwyg-editor\").show();\r\n\r\n\t\t\tthis.element = element;\r\n\t\t\tthis.isActive = true;\r\n\t\t\tthis.oldValue = element.html();\r\n\t\t},\r\n\r\n\t\tdestroy: function(element) {\r\n\t\t\telement.removeAttr('contenteditable spellcheckker');\r\n\t\t\t$(\"#wysiwyg-editor\").hide();\r\n\t\t\tthis.isActive = false;\r\n\r\n\t\t\r\n\t\t\tnode = this.element.get(0);\r\n\t\t\tVvveb.Undo.addMutation({type:'characterData', \r\n\t\t\t\t\t\t\t\t\ttarget: node, \r\n\t\t\t\t\t\t\t\t\toldValue: this.oldValue, \r\n\t\t\t\t\t\t\t\t\tnewValue: node.innerHTML});\r\n\t\t}\r\n\t};\r\n\r\n});\r\n\t"]}